**功能上** 

sbus遥控接收功能

- 通道3作为车的油门控制2006电机转速

- 通道4作为车的方向,两个2006差速转向
- 通道2作为吸附腔的大小,pwm风机
- 通道5作为变形通道,上为飞行模式,下为车载模式

两栖功能

- 车模式: 两个2006电机, 控制速度环, 差速转向

- 飞行模式: 全部交给飞控, 飞控检测通道五

变形功能

- 需要3508和电推杆配合变形, 机械结构未出所以暂定.

与上位机通信功能

- 上行: 陀螺仪数据, 轮子里程, 系统状态 
- 下行: 控制命令

自检功能

- OLED显示设备在线情况

  - CAN设备(2006 3508)是否在线

  - 上位机是否在线

- 上电开启LED流动, 蜂鸣器播放音乐



**根据功能的线程分配**

车辆控制线程 (Vehicle Task)

- 优先级: `osPriorityNormal`
- 功能:
  - 读取SBUS的ch[2]（通道3）作为油门→控制两个2006电机转速
  - 读取SBUS的ch[3]（通道4）作为方向→控制2006差速转向
- 延迟: 2ms

变形控制线程 (Transform Task)

- 优先级: `osPriorityNormal`
- 功能:
  - 监听SBUS的ch[4]（通道5）变形指令
  - 3508变形电机控制
  - 四个电推杆GPIO脉冲控制(一个GPIO控制四个电推杆)
- 延迟: 10ms

吸附系统线程 (Suction Task)

- 优先级: `osPriorityNormal`
- 功能: 根据SBUS的ch[1]（通道2）控制PWM风机
- 延迟: 20ms

上位机通信线程 (Communication Task)

- 优先级: `osPriorityNormal`
- 功能: 串口通信（上行发送数据，下行接收指令）
- 延迟: 50ms

陀螺仪数据处理线程

- 优先级: `osPriorityNormal`
- 功能: 处理六轴数据解算欧拉角

- 延迟: 1ms

自检线程

- 优先级: `osPriorityNormal`
- 功能: OLED显示设备在线情况, 上电开启LED流动, 蜂鸣器播放音乐

- 延迟: 100ms

**有关硬件配置**

CAN设备

- M2006(左轮)  → CAN ID: 1  (0x200标识符控制)
- M2006(右轮)  → CAN ID: 2  (0x200标识符控制)  
- 3508(变形)   → CAN ID: 3  (0x200标识符控制)

GPIO设备

- 风机PWM TIM1_CH1
- 电推杆脉冲信号 PI7

UART设备

- 调试信息串口 UART1
- 上位机通信串口 UART6







